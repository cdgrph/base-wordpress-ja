!function(){function t(){for(var t=this;-1===t.className.indexOf("nav-menu");)"li"===t.tagName.toLowerCase()&&(-1!==t.className.indexOf("focus")?t.className=t.className.replace(" focus",""):t.className+=" focus"),t=t.parentElement}var e,i,s,n,o;if(e=document.getElementById("site-navigation"),e&&(i=e.getElementsByTagName("button")[0],"undefined"!=typeof i)){if(s=e.getElementsByTagName("ul")[0],"undefined"==typeof s)return void(i.style.display="none");s.setAttribute("aria-expanded","false"),-1===s.className.indexOf("nav-menu")&&(s.className+=" nav-menu"),i.onclick=function(){-1!==e.className.indexOf("toggled")?(e.className=e.className.replace(" toggled",""),i.setAttribute("aria-expanded","false"),s.setAttribute("aria-expanded","false")):(e.className+=" toggled",i.setAttribute("aria-expanded","true"),s.setAttribute("aria-expanded","true"))},n=s.getElementsByTagName("a"),o=s.getElementsByTagName("ul");for(var a=0,r=o.length;r>a;a++)o[a].parentNode.setAttribute("aria-haspopup","true");for(a=0,r=n.length;r>a;a++)n[a].addEventListener("focus",t,!0),n[a].addEventListener("blur",t,!0)}}(),function(){var t=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,e=navigator.userAgent.toLowerCase().indexOf("opera")>-1,i=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(t||e||i)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t=location.hash.substring(1),e;/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1)}(),function($,t,e){"use strict";function i(t,e,i){return"undefined"===$.type(i)?t.getAttribute("aria-"+e):(i===!0?i="true":i===!1&&(i="false"),void t.setAttribute("aria-"+e,i))}var s=!!("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch),n=t.devicePixelRatio>1,o="rtl"===e.documentElement.dir,a=function(){for(var t="transition WebkitTransition MozTransition OTransition msTransition".split(" "),i=e.createElement("div").style,s=0;s<t.length;s++)if(t[s]in i)return t[s];return!1}(),r=function(){var t={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd otransitionend"};return t[a]||"transitionend"}();$.fn.cache=function(t,e){var i=this.data(t),s=$.type(i);return"undefined"!==s&&"null"!==s?i:("function"===$.type(e)&&(e=e.call(this)),this.data(t,e),e)};var h={version:"2.1.6",build:"ibs9772x",namespace:"",aria:!0,debug:!1,messages:{loading:"Loading...",error:"An error has occurred!"},bemSeparators:["-","--"],hasTransition:a,isTouch:s,isRetina:n,isRTL:o,transitionEnd:r,cache:{},bem:function(t,e,i){var s=h.bemSeparators;return e&&(t+=s[0]+e),i&&(t+=s[1]+i),h.namespace+t},buildTemplate:function(t){return"function"==typeof t&&(t=t.call(null,h.bem,h.namespace)),t+""},createPlugin:function(t,e,i){var s=t;$.fn[s]&&(s="toolkit"+s.charAt(0).toUpperCase()+s.slice(1)),$.fn[s]=i?function(){var i=h.cache[t+":"+this.selector]=e.apply(this,arguments);return this.each(function(){$(this).cache("toolkit."+t,i)})}:function(){var i=arguments;return this.each(function(){$(this).cache("toolkit."+t,e.apply(this,i))})}}};t.Toolkit=h;var l=h.Class=function(){},d=!1;l.extend=function(t,e){function i(){if(!d){for(var t in this){var e=this[t],s=$.type(e);"array"===s?this[t]=e.slice(0):"object"===s&&(this[t]=$.extend(!0,{},e))}this.uid=i.count+=1;var o=this.name;o&&(this.cssClass=o.replace(/[A-Z]/g,function(t){return"-"+t.charAt(0).toLowerCase()}).slice(1),this.keyName=o.charAt(0).toLowerCase()+o.slice(1)),n&&n.apply(this,arguments)}}d=!0;var s=new this;d=!1,$.extend(s,t);var n=s.constructor;return i.prototype=s,i.prototype.constructor=n||i,i.options=$.extend(!0,{},this.options||{},e||{}),i.extend=this.extend,i.count=0,i};var c=h.Base=l.extend({name:"Base",version:"2.0.0",cache:{},enabled:!1,options:{},__events:[],__hooks:{},addEvent:function(t,e,i,s){var n=this.options;"{mode}"===t&&(t=n.mode),"{selector}"===s&&(s=this.nodes?this.nodes.selector:""),"string"===$.type(i)&&(i=this[i].bind(this)),this.__events.push([t,e,i,s])},addEvents:function(t){$.each(t,function(t,e){this.addEvent.apply(this,e)}.bind(this))},addHook:function(t,e){var i=this.__hooks[t]||[];i.push(e),this.__hooks[t]=i},addHooks:function(t,e){$.each(e,function(e,i){this.addHook(t,i)}.bind(this))},bindEvents:function(i){var s=this,n,o,a,r,h=$(t),l=$(e);$.each(this.__events,function(t,e){n=e[0],o=e[1],a=e[2],r=e[3],s[o]?o=s[o]:"window"===o?o=h:"document"===o&&(o=l),"ready"===n?l.ready(a):r?$(o)[i](n,r,a):$(o)[i](n,a)})},destroy:function(){this.fireEvent("destroying"),this.destructor&&this.destructor(),this.doDestroy&&this.doDestroy(),this.disable(),this.fireEvent("destroyed")},disable:function(){this.enabled&&this.bindEvents("off"),this.enabled=!1},enable:function(){this.enabled||this.bindEvents("on"),this.enabled=!0},fireEvent:function(t,e){var i=this.options.debug||h.debug;i&&(console.log(this.name+"#"+this.uid,(new Date).getMilliseconds(),t,e||[]),"verbose"===i&&console.dir(this));var s=this.__hooks[t];s&&$.each(s,function(t,i){i.apply(this,e||[])}.bind(this))},initialize:function(){this.enable(),this.fireEvent("init")},removeHook:function(t,e){if(!e)return void delete this.__hooks[t];var i=this.__hooks[t];i&&$.each(i,function(t,s){s===e&&(i=i.splice(t,1))})},setOptions:function(e){var i=$.extend(!0,{},h[this.name].options,e||{}),s;i.responsive&&t.matchMedia&&$.each(i.responsive,function(t,e){matchMedia(e.breakpoint).matches&&$.extend(i,e)});for(s in i)s.match(/^on[A-Z]/)&&(this.addHook(s.substr(2).toLowerCase(),i[s]),delete i[s]);return this.options=i,i}},{cache:!0,debug:!1});$.fn.aria=function(t,e){return h.aria?("toggled"===t&&(t={expanded:e,selected:e},e=null),$.access(this,i,t,e,arguments.length>1)):this},$.fn.transitionend=function(t,e){if(arguments.length>0){this.one(r,null,t,e);var i=this.css("transition-duration");("0s"===i||"undefined"===$.type(i))&&this.trigger(r)}else this.trigger(r);return this},$.fn.conceal=function(t){return this.hasClass("show")&&!t&&this.transitionend(function(){$(this).hide()}),this.removeClass("show").addClass("hide").aria("hidden",!0)},$.fn.reveal=function(t){return t||this.show(),setTimeout(function(){this.removeClass("hide").addClass("show").aria("hidden",!1)}.bind(this),1),this},$.fn.toolkit=function(t,e,i){var s=this.selector,n=this.data("toolkit."+t)||h.cache[t+":"+s]||null;return n?(e&&n[e]&&n[e].apply(n,$.makeArray(i)),n):null};var u=h.Component=c.extend({name:"Component",version:"2.1.6",element:null,namespace:"",node:null,constructor:function(t,e){this.setElement(t),this.setOptions(e,this.element)},fireEvent:function(t,e){c.prototype.fireEvent.call(this,t,e);var i=this.element,s=this.node,n=$.Event(t+".toolkit."+this.keyName);n.context=this,i&&i.trigger(n,e||[]),s&&s.trigger(n,e||[])},hide:function(){this.fireEvent("hiding"),this.element.conceal(),this.fireEvent("hidden")},id:function(){var t=$.makeArray(arguments);return t.unshift("toolkit",this.cssClass,this.uid),t.join("-")},inheritOptions:function(t,e){var i,s,n={};for(i in t)"context"!==i&&"template"!==i&&(s=e.data((this.keyName+"-"+i).toLowerCase()),"undefined"!==$.type(s)&&(n[i]=s));return $.extend(!0,{},t,n)},loadContent:function(t,e){var i=!1;t.match(/^#[a-z0-9_\-\.:]+$/i)?t=$(t).html():(t.match(/^([a-z]+:)?\/\//)||t.match(/^\/[\w\-\.\/]+/i))&&(i=!0),this.cache[t]?this.position(this.cache[t]):i?this.requestData(t,e):this.position(t)},ns:function(t,e){var i="data-"+(e||this.keyName);return t&&(i+="-"+t),this.namespace&&(i+='="'+this.namespace+'"'),"["+i+"]"},position:function(t){this.fireEvent("load",[t])},process:function(e){if(e.callback){for(var i=e.callback.split("."),s=t,n=s,o=0;o<i.length;o++)n=s,s=s[i[o]];s.call(n,e)}this.fireEvent("process",[e]),this.hide()},readOption:function(t,e){var i=t.data((this.keyName+"-"+e).toLowerCase());return"undefined"===$.type(i)&&(i=this.options[e]),i},readValue:function(t,e){return e?(t=$(t),"function"===$.type(e)?e.call(this,t):t.attr(e)):null},render:function(t){return $(h.buildTemplate(t))},requestData:function(t,e){var i={};return"object"===$.type(this.options.ajax)&&(i=this.options.ajax),"string"===$.type(t)?i.url=t:$.extend(i,t),i.context=this,i.beforeSend=function(t){t.url=i.url,t.cache=(!i.type||"GET"===i.type.toUpperCase())&&this.options.cache,t.settings=i,t.params=e||{},this.onRequestBefore.call(this,t)},$.ajax(i).done(this.onRequestDone).fail(this.onRequestFail)},setElement:function(t){return this.element=t=$(t),this.namespace=t.data(this.keyName)||"",t},setOptions:function(t,e){if(e){var i=this.readOption(e,"group");i&&t.groups[i]&&$.extend(t,t.groups[i])}var s=c.prototype.setOptions.call(this,t);return e&&(s=this.inheritOptions(s,e)),s.mode&&"hover"===s.mode&&(s.mode=h.isTouch?"click":"mouseenter"),this.options=s,s},show:function(t){t&&(this.node=$(t)),this.fireEvent("showing"),this.element.reveal(),this.fireEvent("shown")},doDestroy:function(){this.element&&this.element.removeData("toolkit."+this.keyName)},onHide:function(){this.element.is(":shown")&&this.hide()},onRequestBefore:function(t){this.cache[t.url]=!0,this.element.addClass("is-loading").aria("busy",!0)},onRequestDone:function(t,e,i){var s=i.url;this.element.removeClass("is-loading").aria("busy",!1),delete this.cache[s],i.getResponseHeader("Content-Type").indexOf("text/html")>=0?(i.cache&&(this.cache[s]=t),this.position(t)):this.process(t)},onRequestFail:function(t,e,i){delete this.cache[t.url],this.element.removeClass("is-loading").addClass("has-failed").aria("busy",!1),this.position(h.messages.error)},onShow:function(t){t.preventDefault(),this.show(t.currentTarget)}},{ajax:{},context:null,className:""});$.bound=function(t,e,i){return i=i||0,t>=e?t=i:i>t&&(t=e-1),t},$.expr[":"].shown=function(t){return"hidden"!==$(t).css("visibility")},$.event.special.horizontalresize=function(){function e(t){var e=i.width();e!==s&&(s=e,$(t.target).trigger("horizontalresize"))}var i=$(t),s=i.width();return{setup:function(){i.on("resize",e)},teardown:function(){i.off("resize",e)}}}();var p=h.Accordion=u.extend({name:"Accordion",version:"2.0.0",headers:[],index:0,sections:[],constructor:function(t,e){var i=this;t=this.setElement(t).attr("role","tablist"),e=this.setOptions(e,t),this.headers=t.find(this.ns("header")).each(function(t){$(this).data("accordion-index",t).attr({role:"tab",id:i.id("header",t)}).aria({controls:i.id("section",t),selected:!1,expanded:!1})}),this.sections=t.find(this.ns("section")).each(function(t){$(this).attr({role:"tabpanel",id:i.id("section",t)}).aria("labelledby",i.id("header",t)).conceal()}),this.addEvents([["horizontalresize","window",$.debounce(this.calculate.bind(this))],["{mode}","element","onShow",this.ns("header")]]),this.initialize(),this.calculate(),this.jump(e.defaultIndex)},destructor:function(){this.headers.addClass("is-active").attr("toggled",!0),this.sections.attr("style","").reveal()},calculate:function(t){"function"!==$.type(t)&&(t=function(t){return t.outerHeight()}),this.sections.each(function(){var e=$(this),i=e.hasClass("hide")?"hide":"show",s=e.css("max-height");e.addClass("no-transition").removeClass(i).css("max-height","");var n=t.call(this,e);e.addClass(i).css("max-height",s).removeClass("no-transition"),e.data("accordion-height",n),e.hasClass("show")&&e.css("max-height",n)})},jump:function(t){this.show(this.headers[$.bound(t,this.headers.length)])},show:function(t){t=$(t);var e=this.options,i=t.next(),s=t.data("accordion-index"),n=parseInt(i.data("accordion-height"),10),o=this.node&&this.node.is(t);if(this.fireEvent("showing",[i,t,this.index]),"click"===e.mode&&(e.multiple||e.collapsible&&o))i.is(":shown")&&this.node?(i.css("max-height",0).conceal(!0),t.aria("toggled",!1).removeClass("is-active")):(i.css("max-height",n).reveal(!0),t.aria("toggled",!0).addClass("is-active"));else{if(o)return;this.sections.css("max-height",0).conceal(!0),i.css("max-height",n).reveal(!0),this.headers.aria("toggled",!1).removeClass("is-active"),t.aria("toggled",!0).addClass("is-active")}this.index=s,this.node=t,this.fireEvent("shown",[i,t,s])}},{mode:"click",defaultIndex:0,multiple:!1,collapsible:!1});h.createPlugin("accordion",function(t){return new p(this,t)});var f=h.TemplateComponent=u.extend({createElement:function(t){t=t||this.options;var e=$(t.templateFrom);if(e.length||(e=this.render(t.template)),!e.length)throw new Error("Failed to render template");return t.className&&e.addClass(t.className),t.animation&&e.addClass(t.animation),e.attr("id",this.id()).conceal(!0).hide().appendTo("body")},doDestroy:function(){u.prototype.doDestroy.call(this),this.element.remove()}},{template:"",templateFrom:""}),m=null,v=h.Blackout=f.extend({name:"Blackout",version:"2.0.0",count:0,loader:null,message:null,constructor:function(t){t=this.setOptions(t),this.element=this.createElement(),this.loader=this.render(t.loaderTemplate).appendTo(this.element),this.message=this.loader.find(this.ns("message","loader")),t.showLoading&&this.message.html(h.messages.loading),this.initialize()},destructor:function(){this.element.remove(),m=null},hide:function(){this.fireEvent("hiding");var t=this.count-1;0>=t?(this.count=0,this.element.conceal()):this.count=t,this.hideLoader(),this.fireEvent("hidden",[0>=t])},hideLoader:function(){this.loader.hide()},show:function(){this.fireEvent("showing");var t=!1;this.count++,1===this.count&&(this.element.reveal(),t=!0),this.showLoader(),this.fireEvent("shown",[t])},showLoader:function(){this.loader.show()}},{showLoading:!0,template:function(t){return'<div class="'+t("blackout")+'"></div>'},templateFrom:"#toolkit-blackout-1",loaderTemplate:function(t){return'<div class="'+t("loader")+' bar-wave"><span></span><span></span><span></span><span></span><span></span><div class="'+t("loader","message")+'" data-loader-message></div></div>'}});v.instance=function(t){return m?m:m=new v(t)},$.event.special.swipe=function(){function t(t){var e=t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t;return{time:(new Date).getTime(),x:e.pageX,y:e.pageY}}function e(t,e,i,s){if(t&&e){var n=$.event.special.swipe,o=e.x-t.x,a=e.y-t.y,h;if(e.time-t.time<=n.duration){if(r(o)>=n.distance&&r(a)<=n.restraint)h=0>o?"left":"right";else{if(!(r(a)>=n.distance&&r(o)<=n.restraint))return;h=0>a?"up":"down"}var l={target:s,swipestart:t,swipestop:e};i.trigger($.Event("swipe",l)).trigger($.Event("swipe"+h,l))}}}var i=s?"touchstart":"mousedown",n=s?"touchmove":"mousemove",o=s?"touchend":"mouseup",a=!1,r=Math.abs;return{duration:1e3,distance:50,restraint:75,setup:function(){function h(e){var i=t(e);r(c.x-i.x)>r(c.y-i.y)&&e.preventDefault()}function l(){c=u=null,a=!1,d.off(n,h)}var d=$(this),c,u;d.on(i,function(e){s||"img"!==e.target.tagName.toLowerCase()||e.preventDefault(),a||(c=t(e),u=e.target,a=!0,s&&d.on(n,h))}),d.on(o,function(i){e(c,t(i),d,u),l()}),d.on("touchcancel",l)},teardown:function(){$(this).off(i).off(n).off(o).off("touchcancel")}}}(),$.each("swipe swipeleft swiperight swipeup swipedown".split(" "),function(t,e){"swipe"!==e&&($.event.special[e]={setup:function(){$(this).on("swipe",$.noop)},teardown:function(){$(this).off("swipe")}})}),$.throttle=function(t,e){if(!e)return t;var i=!1;return function(){var s=this,n=arguments;i||(i=!0,setTimeout(function(){t.apply(s,n),i=!1},e))}};var g=h.Carousel=u.extend({name:"Carousel",version:"2.1.6",animating:!1,container:null,index:-1,items:[],stopped:!1,tabs:[],timer:null,_dimension:"",_position:"",_sizes:[],_resetTo:null,constructor:function(t,e){var i,s=this;t=this.setElement(t),e=this.setOptions(e,t),t.aria("live",e.autoCycle?"assertive":"off").addClass(e.animation),this.container=t.find(this.ns("items")).addClass("no-transition"),this.items=i=this.container.find("> li").each(function(t){$(this).attr({role:"tabpanel",id:s.id("item",t)}).data("carousel-index",t).aria("hidden",t>0)}),this.tabs=t.find(this.ns("tabs")).attr("role","tablist").find("a").each(function(t){$(this).data("carousel-index",t).attr({role:"tab",id:s.id("tab",t)}).aria({controls:s.id("item",t),selected:!1,expanded:!1})}),this.addEvents([["resize","window",$.throttle(this.calculate.bind(this),50)],["keydown","window","onKeydown"],["click","element","onJump",this.ns("tabs")+" a"],["click","element","next",this.ns("next")],["click","element","prev",this.ns("prev")],["click","element","start",this.ns("start")],["click","element","stop",this.ns("stop")]]),e.swipe&&this.addEvents([["swipeleft","element","next"],["swipeup","element","next"],["swiperight","element","prev"],["swipedown","element","prev"]]),e.stopOnHover&&this.addEvents([["mouseenter","element","stop"],["mouseleave","element","start"]]),this.initialize(),this._setupState(),this._buildClones(),this.calculate(),this.start(),this.jump(e.defaultIndex)},destructor:function(){this.stop(),this.jump(0);var t=this._position||"left";this.container.transitionend(function(){$(this).addClass("no-transition").css(t,0).find("li.is-cloned").remove()})},calculate:function(){if("fade"!==this.options.animation){var t=this._dimension,e=0,i=[];this.items.each(function(){var s=$(this),n=s[t](),o=parseInt(s.css("margin-"+("width"===t?"left":"top")),10),a=parseInt(s.css("margin-"+("width"===t?"right":"bottom")),10),r=n+o+a;e+=r,i.push({size:n,totalSize:r,marginStart:o,marginEnd:a,clone:s.hasClass("is-cloned")}),s.css(t,n)}),this._sizes=i,this.container.css(t,e)}},jump:function(t){if(!this.animating){var e=this._getIndex(t),i=e[0],s=e[1];s!==this.index&&(this.fireEvent("jumping",[this.index]),this._updateTabs(s),this._updateItems(i),this._beforeCycle(),"fade"===this.options.animation?this.items.conceal(!0).eq(s).transitionend(this._afterCycle.bind(this)).reveal(!0):this.container.transitionend(this._afterCycle.bind(this)).css(this._position,-this._getSizeSum(i)),this.index=s,this.reset(),this.fireEvent("jumped",[s]))}},next:function(){this.jump(this.index+this.options.itemsToCycle)},prev:function(){this.jump(this.index-this.options.itemsToCycle)},reset:function(){this.options.autoCycle&&(clearInterval(this.timer),this.timer=setInterval(this.onCycle.bind(this),this.options.duration))},start:function(){this.element.removeClass("is-stopped"),this.stopped=!1,this.fireEvent("start")},stop:function(){this.element.addClass("is-stopped"),this.stopped=!0,clearInterval(this.timer),this.fireEvent("stop")},_afterCycle:function(){this.animating=!1;var t=this.container,e=this._resetTo;null!==e&&(t.addClass("no-transition").css(this._position,-this._getSizeSum(e)),this._updateItems(e),this._resetTo=null),setTimeout(function(){t.removeClass("no-transition"),this.fireEvent("cycled")}.bind(this),15)},_beforeCycle:function(){this.animating=!0,this.fireEvent("cycling")},_buildClones:function(){var t=this.options,e=this.items,i=this.container,s=t.itemsToShow;t.infinite&&(e.slice(0,s).clone().addClass("is-cloned").removeAttr("id").removeAttr("role").appendTo(i),e.slice(-s).clone().addClass("is-cloned").removeAttr("id").removeAttr("role").prependTo(i),this.items=i.find("> li"))},_getIndex:function(t){var e=this.options,i=e.itemsToShow,s,n;if(t=parseInt(t,10),e.infinite){var o=this.items.length,a=o-2*i;t>=a?(this._resetTo=0+i,n=o-i,s=0):-i>=t?(this._resetTo=a,n=0,s=a-i):(this._resetTo=null,s=t,n=t+i)}else{var r=this.element.removeClass("no-next no-prev"),h=this.items.length-i;t>=h?(t=h,e.loop?t===this.index&&this.index===h&&(t=0):r.addClass("no-next")):0>=t&&(t=0,e.loop?t===this.index&&0===this.index&&(t=h):r.addClass("no-prev")),n=s=t}return[n,s]},_getSizeSum:function(t){var e=0;return $.each(this._sizes,function(i,s){t>i&&(e+=s.totalSize)}),e},_setupState:function(){var t=this.options,e=t.animation;t.itemsToCycle>t.itemsToShow&&(t.itemsToCycle=t.itemsToShow),"fade"===e?(t.itemsToShow=t.itemsToCycle=1,t.infinite=!1):"slide-up"===e?(this._dimension="height",this._position="top"):"slide"===e&&(this._dimension="width",this._position=t.rtl?"right":"left")},_updateItems:function(t){this.items.removeClass("is-active").aria("hidden",!0).slice(t,t+this.options.itemsToShow).addClass("is-active").aria("hidden",!1)},_updateTabs:function(t){var e=this.options.itemsToShow,i=this.items.length,s=t+e,n=$([]),o=this.tabs.removeClass("is-active").aria("toggled",!1);o.length&&(this.options.infinite&&(i-=2*e),t>=0?n=n.add(o.slice(t,s)):(n=n.add(o.slice(0,s)),n=n.add(o.slice(t))),s>i&&(n=n.add(o.slice(0,s-i))),n.addClass("is-active").aria("toggled",!0))},onCycle:function(){this.stopped||(this.options.reverse?this.prev():this.next())},onJump:function(t){t.preventDefault(),this.jump($(t.currentTarget).data("carousel-index")||0)},onKeydown:function(t){switch(t.keyCode){case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1);break;default:return}t.preventDefault()}},{animation:"slide",duration:5e3,autoCycle:!0,stopOnHover:!0,infinite:!0,loop:!0,reverse:!1,rtl:h.isRTL,swipe:h.isTouch,itemsToShow:1,itemsToCycle:1,defaultIndex:0});h.createPlugin("carousel",function(t){return new g(this,t)});var w=h.CompositeComponent=f.extend({elements:{},nodes:null,wrapper:null,createElement:function(t,e){e=this.inheritOptions(e||this.options,t);var i=f.prototype.createElement.call(this,e);this.wrapper&&i.appendTo(this.wrapper);var s=t.data("toolkit.cid");return i.attr("id",this.id(s)).data("toolkit.cid",s)},createWrapper:function(){var t=this.options;return this.wrapper=this.render(t.wrapperTemplate).addClass(h.buildTemplate(t.wrapperClass)).attr("id",this.id("wrapper")).appendTo("body")},hideElements:function(){$.each(this.elements,function(t,e){$(e).conceal()})},loadElement:function(t,e){var i=this.elements,s,n=$(t).cache("toolkit.cid",function(){return Math.random().toString(32).substr(2)});return i[n]?s=i[n]:(s=i[n]=this.createElement(t),"function"===$.type(e)&&e.call(this,s)),this.element=s},doDestroy:function(){var t=this.keyName;this.nodes&&(this.nodes.removeData("toolkit."+t),delete h.cache[t+":"+this.nodes.selector]),this.hideElements(),this.wrapper&&this.wrapper.remove()},onShowToggle:function(t){var e=$(t.currentTarget),i,s=this.node&&this.node.is(e),n=e.data("toolkit.cid");if(i=n&&this.elements[n]?this.elements[n]:this.element,i&&i.is(":shown")){if(h.isTouch?s&&"a"===this.node.prop("tagName").toLowerCase()||t.preventDefault():t.preventDefault(),s)return void("click"===this.options.mode&&this.hide())}else t.preventDefault();this.show(e)}},{wrapperClass:"",wrapperTemplate:'<div class="toolkit-plugin"></div>'});$.event.special.clickout=function(){var t=[];return $(e).on(s?"touchend":"click",function(i){if(t.length){var s=!0,n=$(e),o=$(i.target);$.each(t,function(t,e){var a=$(e);return(s="string"===$.type(e)?!o.is(e)&&!a.has(i.target).length:!a.is(i.target)&&!a.has(i.target).length)?void(n=n.add(a)):!1}),s&&n.trigger("clickout",[i.target])}}),{add:function(i){var s=this;this===e&&(s=i.selector),-1===$.inArray(s,t)&&t.push(s)},remove:function(i){var s=this;this===e&&(s=i.selector),t=$.grep(t,function(t){return t!==s})}}}();var b=h.Drop=w.extend({name:"Drop",version:"2.1.0",constructor:function(t,e){this.nodes=$(t),this.setOptions(e),this.addEvents([["clickout","document","hide",this.ns("menu")],["clickout","document","hide","{selector}"],["{mode}","document","onShow","{selector}"]]),this.initialize()},destructor:function(){this.hide(),$(this.ns("menu")).conceal()},createElement:function(t){var e=this.readValue(t,this.options.getTarget);if(!e||"#"!==e.substr(0,1))throw new Error("Drop menu "+e+" does not exist");return $(e)},hide:function(){var t=this.element,e=this.node;(t||e)&&(this.fireEvent("hiding",[t,e]),t.conceal(),e.aria("toggled",!1).removeClass("is-active"),this.fireEvent("hidden",[t,e]))},show:function(t){this.node=t=$(t);var e=this.loadElement(t);this.fireEvent("showing",[e,t]),e.reveal(),t.aria("toggled",!0).addClass("is-active"),this.fireEvent("shown",[e,t])},onShow:function(t){t.preventDefault(),this.hide();var e=$(t.currentTarget),i=this.loadElement(e);i.is(":shown")?this.hide():this.show(e)}},{mode:"click",getTarget:"data-drop"});h.createPlugin("drop",function(t){return new b(this,t)},!0);var y=h.Flyout=w.extend({name:"Flyout",version:"2.1.3",url:"",data:[],dataMap:{},timers:{},constructor:function(t,e,i){h.isTouch||(this.nodes=$(t),i=this.setOptions(i),this.createWrapper(),"click"===i.mode?this.addEvents([["click","document","onShowToggle","{selector}"],["resize","window",$.debounce(this.onHide.bind(this))]]):this.addEvents([["mouseenter","document","onShowToggle","{selector}"],["mouseenter","document","onEnter","{selector}"],["mouseleave","document","onLeave","{selector}"]]),this.initialize(),e&&$.getJSON(e,function(t){this.load(t)}.bind(this)))},destructor:function(){this.clearTimer("show"),this.clearTimer("hide")},clearTimer:function(t){clearTimeout(this.timers[t]),delete this.timers[t]},hide:function(){this.fireEvent("hiding"),this.element.conceal(),this.node.removeClass("is-active"),this.fireEvent("hidden")},load:function(t,e){if(e=e||0,e||(this.data=t),t.url&&(this.dataMap[t.url]=t),t.children)for(var i=0,s=t.children.length;s>i;i++)this.load(t.children[i],e+1)},position:function(){var e=this.options,i=this.node,s=this.loadElement(i);if(s.children().length){this.fireEvent("showing");var n=s.outerHeight(),o=i.offset(),a=o.left+e.xOffset,r=o.top+e.yOffset+i.outerHeight(),l=$(t).height(),d="left";r>l/2&&(r=o.top-e.yOffset-n),h.isRTL&&(a=$(t).width()-o.left-i.outerWidth(),d="right"),s.css("top",r).css(d,a).reveal(),this.fireEvent("shown")}},show:function(t){t=$(t);var e=this.readValue(t,this.options.getUrl)||t.attr("href");this.url&&e!==this.url&&(this.hide(),this.startTimer("show",this.options.showDelay)),this.url=e,this.node=t.addClass("is-active"),this.loadElement(t,function(t){t.addClass("is-root"),this.dataMap[e]&&this._buildMenu(t,this.dataMap[e])}),"click"===this.options.mode&&this.position()},startTimer:function(t,e,i){this.clearTimer(t);var s;s="show"===t?this.position:this.hide,s&&(this.timers[t]=setTimeout(function(){s.apply(this,i||[])}.bind(this),e))},_buildMenu:function(t,e){if(e.children&&e.children.length){var i=this.options,s=[],n,o,a,r=i.itemLimit,l,d;if(i.className&&t.addClass(i.className),t.aria("expanded",!1).attr("role","menu"),r&&e.children.length>r)for(l=0,d=e.children.length;d>l;)s.push(e.children.slice(l,l+=r));else s.push(e.children);for(var c=0,u,p;u=s[c];c++){for(n=$("<ul/>"),l=0,d=u.length;d>l;l++)if(p=u[l],p.url?(o=$("<li/>"),a=$("<a/>",{text:p.title,href:p.url,role:"menuitem"}),$("<span/>").addClass(p.icon||(h.isRTL?"caret-left":"caret-right")).prependTo(a)):(o=this.render(i.template),a=$("<span/>",{text:p.title,role:"presentation"})),p.attributes&&a.attr(p.attributes),p.className&&o.addClass(p.className),o.append(a).appendTo(n),p.children&&p.children.length){var f=this.render(i.template).conceal().appendTo(o);this._buildMenu(f,p),o.addClass("has-children").aria("haspopup",!0).on("mouseenter",this.onPositionChild.bind(this,o)).on("mouseleave",this.onHideChild.bind(this,o))}t.append(n)}"click"!==i.mode&&t.hasClass("is-root")&&t.on({mouseenter:function(){this.clearTimer("hide")}.bind(this),mouseleave:function(){this.startTimer("hide",i.hideDelay)}.bind(this)})}},onEnter:function(){this.clearTimer("hide"),this.startTimer("show",this.options.showDelay)},onHideChild:function(t){t=$(t),t.removeClass("is-open"),t.children(this.ns("menu")).removeAttr("style").aria({expanded:!1,hidden:!1}).conceal(),this.fireEvent("hideChild",[t])},onLeave:function(){this.clearTimer("show"),this.startTimer("hide",this.options.showDelay)},onPositionChild:function(e){var i=e.children(this.ns("menu"));if(i){i.aria({expanded:!0,hidden:!0});var s=i.children();i.css("width",s.outerWidth()*s.length+"px");var n=$(t),o=n.height()+n.scrollTop(),a=e.offset(),r=e.outerHeight(),l="push-opposite";h.isRTL?a.left-i.outerWidth()<0?i.addClass(l):i.removeClass(l):a.left+e.outerWidth()+i.outerWidth()>=n.width()?i.addClass(l):i.removeClass(l),a.top>o/2?i.css("top","-"+(i.outerHeight()-r)+"px"):i.css("top",0),e.addClass("is-open"),i.reveal(),this.fireEvent("showChild",[e])}}},{mode:"hover",getUrl:"href",xOffset:0,yOffset:0,showDelay:350,hideDelay:1e3,itemLimit:15,wrapperClass:function(t){return t("flyouts")},template:function(t){return'<div class="'+t("flyout")+'" data-flyout-menu></div>'},headingTemplate:function(t){return'<li class="'+t("flyout","heading")+'"></li>'}});h.createPlugin("flyout",function(t,e){return new y(this,t,e)},!0);var C=h.Input=u.extend({name:"Input",version:"2.1.0",input:null,wrapper:null,constructor:function(t,e){t=this.setElement(t),e=this.setOptions(e,t),e.checkbox&&t.find(e.checkbox).inputCheckbox(e),e.radio&&t.find(e.radio).inputRadio(e),e.select&&t.find(e.select).inputSelect(e),this.initialize()},destructor:function(){var t=this.options,e=this.element;"Input"===this.name?(t.checkbox&&e.find(t.checkbox).each(function(){$(this).toolkit("inputCheckbox","destroy")}),t.radio&&e.find(t.radio).each(function(){$(this).toolkit("inputRadio","destroy")}),t.select&&e.find(t.select).each(function(){$(this).toolkit("inputSelect","destroy")})):this.wrapper&&(this.wrapper.replaceWith(e),e.removeAttr("style"))},copyClasses:function(t,e){var i=($(t).attr("class")||"").replace(this.options.filterClasses,"").trim();i&&$(e).addClass(i)},_buildWrapper:function(){var t=this.element,e=this.render(this.options.template).insertBefore(t).append(t);return this.options.copyClasses&&this.copyClasses(t,e),e}},{copyClasses:!0,filterClasses:/\binput\b/,checkbox:"input:checkbox",radio:"input:radio",select:"select",template:function(t){return'<div class="'+t("custom-input")+'"></div>'}});h.createPlugin("input",function(t){return new C(this,t)});var x=h.InputCheckbox=C.extend({name:"InputCheckbox",version:"2.1.0",constructor:function(t,e){this.element=t=$(t),e=this.setOptions(e,t),this.wrapper=this._buildWrapper(),this.input=this.render(e.checkboxTemplate).attr("for",t.attr("id")).insertAfter(t),this.initialize()}},{checkboxTemplate:function(t){return'<label class="'+t("checkbox")+'"></label>'}});h.createPlugin("inputCheckbox",function(t){return new x(this,t)});var k=h.InputRadio=C.extend({name:"InputRadio",version:"2.1.0",constructor:function(t,e){this.element=t=$(t),e=this.setOptions(e,t),this.wrapper=this._buildWrapper(),this.input=this.render(e.radioTemplate).attr("for",t.attr("id")).insertAfter(t),this.initialize()}},{radioTemplate:function(t){return'<label class="'+t("radio")+'"></label>'}});h.createPlugin("inputRadio",function(t){return new k(this,t)}),$.fn.toString=function(){return this.prop("outerHTML")};var E=h.InputSelect=C.extend({name:"InputSelect",version:"2.1.0",dropdown:null,index:0,multiple:!1,constructor:function(t,e){this.element=t=$(t),e=this.setOptions(e,t),this.multiple=t.prop("multiple"),this.multiple&&e["native"]||(this.wrapper=this._buildWrapper(),this.input=this._buildButton(),this.addEvent("change","element","onChange"),e["native"]||(this.addEvents([["blur","element","hide"],["clickout","dropdown","hide"],["click","input","onToggle"]]),this.multiple||this.addEvent("keydown","window","onCycle"),this.dropdown=this._buildDropdown(),this.element.css("z-index",1)),this.initialize(),this.element.change())},hide:function(){this.dropdown.is(":shown")&&(this.fireEvent("hiding"),this.input.removeClass("is-active"),this.dropdown.conceal(),this.fireEvent("hidden"))},show:function(){this.fireEvent("showing"),this.options.hideOpened&&$(this.ns("options","select")).each(function(){$(this).siblings("select").toolkit("inputSelect","hide")}),this.input.addClass("is-active"),this.dropdown.reveal(),this.fireEvent("shown")},_buildButton:function(){var t=this.options,e=this.render(t.selectTemplate).find(this.ns("arrow","select")).html(this.render(t.arrowTemplate)).end().find(this.ns("label","select")).html(h.messages.loading).end().css("min-width",this.element.width()).insertAfter(this.element);return this.element.css("min-height",e.outerHeight()),e},_buildDropdown:function(){var t=this.element,e=this.options,i=this._buildOption.bind(this),s=this.render.bind(this),n=s(e.optionsTemplate).attr("role","listbox").aria("multiselectable",this.multiple),o=$("<ul/>"),a=0,r=this;return this.dropdown=n,t.children().each(function(){var t=$(this);
"optgroup"===t.prop("tagName").toLowerCase()?(0===a&&(e.hideFirst=!1),o.append(s(e.headingTemplate).text(t.attr("label"))),t.children().each(function(){var e=$(this);t.prop("disabled")&&e.prop("disabled",!0),e.prop("selected")&&(r.index=a),o.append(i(e,a)),a++})):(t.prop("selected")&&(r.index=a),o.append(i(t,a)),a++)}),e.hideSelected&&!e.multiple&&n.addClass("hide-selected"),e.hideFirst&&n.addClass("hide-first"),this.multiple&&n.addClass("is-multiple"),this.wrapper.append(n.append(o)),n},_buildOption:function(t,e){var i=this.element,s=this.dropdown,n=this.options,o=t.prop("selected"),a="is-active",r=$("<li/>"),h=t.text(),l;o&&r.addClass(a),(l=this.readValue(t,n.getDescription))&&(h+=this.render(n.descTemplate).html(l).toString());var d=$("<a/>",{html:h,href:"javascript:;",role:"option"}).aria("selected",o);if(this.options.copyClasses&&this.copyClasses(t,r),r.append(d),t.prop("disabled"))return r.addClass("is-disabled"),d.aria("disabled",!0),r;if(this.multiple)d.click(function(){var e=$(this),s=!1;t.prop("selected")?e.parent().removeClass(a):(s=!0,e.parent().addClass(a)),t.prop("selected",s),e.aria("selected",s),i.change()});else{var c=this;d.click(function(){s.find("li").removeClass(a).end().find("a").aria("selected",!1),$(this).aria("selected",!0).parent().addClass(a),c.hide(),c.index=e,i.val(t.val()),i.change()})}return r},_loop:function(t,e,i){var s=this.options.hideFirst;for(t+=e;"undefined"===$.type(i[t])||i[t].disabled||0===t&&s;)t+=e,t>=i.length?t=0:0>t&&(t=i.length-1);return t},onChange:function(t){var e=$(t.target),i=e.find("option"),s=this.options,n=[],o=[],a=this;if(i.each(function(){this.selected&&(n.push(this),o.push(a.readValue(this,s.getOptionLabel)||this.textContent))}),this.multiple){var r=this.readValue(e,s.getDefaultLabel),h=s.multipleFormat,l=o.length;if(!o.length&&r)o=r;else if("count"===h)o=s.countMessage.replace("{count}",l).replace("{total}",i.length);else if("list"===h){var d=s.listLimit;o=o.splice(0,d).join(", "),l>d&&(o+=" ...")}}else o=o.join(", ");e.parent().find(this.ns("label","select")).text(o),this.fireEvent("change",[e.val(),n])},onCycle:function(t){if(this.dropdown.is(":shown")&&$.inArray(t.keyCode,[38,40,13,27])>=0){t.preventDefault();var e=this.element.find("option"),i=this.dropdown.find("a"),s="is-active",n=this.index;switch(t.keyCode){case 13:case 27:return void this.hide();case 38:n=this._loop(n,-1,e);break;case 40:n=this._loop(n,1,e)}e.prop("selected",!1),e[n].selected=!0,i.parent().removeClass(s),i.eq(n).parent().addClass(s),this.index=n,this.element.change()}},onToggle:function(){this.element.prop("disabled")||(this.dropdown.is(":shown")?this.hide():this.show())}},{"native":h.isTouch,multipleFormat:"count",countMessage:"{count} of {total} selected",listLimit:3,hideOpened:!0,hideFirst:!1,hideSelected:!1,getDefaultLabel:"title",getOptionLabel:"title",getDescription:"data-description",selectTemplate:function(t){return'<div class="'+t("select")+'" data-select><div class="'+t("select","arrow")+'" data-select-arrow></div><div class="'+t("select","label")+'" data-select-label></div></div>'},arrowTemplate:'<span class="caret-down"></span>',optionsTemplate:function(t){return'<div class="'+t("drop")+" "+t("drop","","down")+" "+t("select","options")+'" data-select-options></div>'},headingTemplate:function(t){return'<li class="'+t("drop","heading")+'"></li>'},descTemplate:function(t){return'<span class="'+t("drop","desc")+'"></span>'}});h.createPlugin("inputSelect",function(t){return new E(this,t)});var T=h.LazyLoad=u.extend({name:"LazyLoad",version:"2.1.0",container:$(t),items:[],loaded:0,timer:null,constructor:function(t,e){t=$(t),e=this.setOptions(e,t),this.items=t.find(this.options.lazyClass),"auto"===t.css("overflow")&&(this.container=t);var i=$.throttle(this.load.bind(this),e.throttle);this.addEvents([["scroll","container",i],["resize","window",i],["ready","document","onReady"]]),this.initialize()},destructor:function(){clearTimeout(this.timer),this.loadAll()},inViewport:function(e){e=$(e);var i=this.container,s=this.options.threshold,n=i.height(),o=i.width(),a=i.scrollTop(),r=i.scrollLeft(),h=e.offset(),l=h.left,d=h.top;if(i[0]!==t){var c=i.offset();l-=c.left,d-=c.top}return e.is(":visible")&&d>=a-s&&a+n+s>=d&&l>=r-s&&r+o+s>=l},load:function(){return this.loaded>=this.items.length?void this.shutdown():(this.fireEvent("loading"),this.items.each(function(t,e){e&&this.inViewport(e)&&this.show(e,t)}.bind(this)),void this.fireEvent("loaded"))},loadAll:function(){this.loaded>=this.items.length||(this.fireEvent("loadAll"),this.items.each(function(t,e){this.show(e,t)}.bind(this)))},show:function(t,e){t=$(t),this.fireEvent("showing",[t]),this.element=t.removeClass(this.options.lazyClass.substr(1)),t.find("img").each(function(){var t=$(this),e;h.isRetina&&(e=t.data("src-retina")),e||(e=t.data("src")),e&&t.attr("src",e)}),this.items.splice(e,1,null),this.loaded++,this.fireEvent("shown",[t])},shutdown:function(){this.enabled&&(this.disable(),this.fireEvent("shutdown"))},onReady:function(){this.load(),this.options.forceLoad&&(this.timer=setTimeout(this.loadAll.bind(this),this.options.delay))}},{forceLoad:!1,delay:1e4,threshold:150,throttle:50,lazyClass:".lazy-load"});h.createPlugin("lazyLoad",function(t){return new T(this,t)});var _=h.Mask=u.extend({name:"Mask",version:"2.0.0",mask:null,message:null,constructor:function(t,e){if(t=this.setElement(t),e=this.setOptions(e,t),!t.is("body")){t.addClass("is-maskable");var i=t.css("position");i&&"static"!==i||t.css("position","relative")}var s=t.find("> "+this.ns());s.length||(s=this.render(e.template)),this.setMask(s),e.selector&&this.addEvent("click","document","toggle",e.selector),this.initialize()},destructor:function(){this.mask.remove(),this.element.removeClass("is-maskable").removeClass("is-masked").css("position","")},hide:function(){this.fireEvent("hiding"),this.mask.conceal(),this.element.removeClass("is-masked"),this.fireEvent("hidden")},setMask:function(t){var e=this.options,i;t.addClass("hide").appendTo(this.element),this.element.is("body")&&t.css("position","fixed"),e.revealOnClick&&t.click(this.hide.bind(this)),this.mask=t,i=t.find(this.ns("message")),!i.length&&e.messageContent&&(i=this.render(e.messageTemplate).html(e.messageContent).appendTo(t)),this.message=i},show:function(){this.fireEvent("showing"),this.mask.reveal(),this.element.addClass("is-masked"),this.fireEvent("shown")},toggle:function(){this.mask.is(":shown")?this.hide():this.show()}},{selector:"",revealOnClick:!1,messageContent:"",template:function(t){return'<div class="'+t("mask")+'" data-mask></div>'},messageTemplate:function(t){return'<div class="'+t("mask","message")+'" data-mask-message></div>'}});h.createPlugin("mask",function(t){return new _(this,t)}),$.debounce=function(t,e){var i;return function(){var s=this,n=arguments;clearTimeout(i),i=setTimeout(function(){i=null,t.apply(s,n)},e||150)}};var O=h.Matrix=u.extend({name:"Matrix",version:"2.0.0",colCount:0,colHeights:[],colWidth:0,items:[],images:[],matrix:[],wrapperWidth:0,constructor:function(t,e){this.setElement(t),this.setOptions(e,this.element),this.addEvent("horizontalresize","window",$.debounce(this.onResize.bind(this))),this.initialize(),this.refresh()},destructor:function(){this.element.removeAttr("style"),this.items.removeAttr("style")},append:function(t){t=$(t).addClass("hide").appendTo(this.element),this.fireEvent("appending",[t]),this.refresh()},prepend:function(t){t=$(t).addClass("hide").prependTo(this.element),this.fireEvent("prepending",[t]),this.refresh()},refresh:function(){this.items=this.element.find("> li").each(function(){var t=$(this);t.cache("matrix-column-width",t.outerWidth())}),this.options.defer?this._deferRender():this.render()},remove:function(t){t=$(t),this.fireEvent("removing",[t]),this.items.filter(t).remove(),this.refresh()},render:function(){this._calculateColumns(),this.fireEvent("rendering");var t=this.element,e=this.items;e.length?this.colCount<=1?(t.removeAttr("style").addClass("no-columns"),e.removeAttr("style")):(t.removeClass("no-columns"),this._organizeItems(),this._positionItems()):t.removeAttr("style"),this.fireEvent("rendered")},_calculateColumns:function(){var t=this.element.outerWidth(),e=this.options.width,i=this.options.gutter,s=Math.max(Math.floor(t/e),1),n=s*(e+i)-i,o;s>1&&(n>t?(o=n-t,e-=o/s):t>n&&(o=t-n,e+=o/s)),this.wrapperWidth=t,this.colWidth=e,this.colCount=s},_deferRender:function(){var t=[];this.images=this.element.find("img").each(function(e,i){if(!i.complete){var s=i.src,n=$.Deferred();i.onload=n.resolve,i.onerror=i.onabort=n.reject,i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=s,t.push(n.promise())}}),$.when.apply($,t).always(this.render.bind(this))},_organizeItems:function(){var t,e,i,s=this.items.length;this.matrix=[];for(var n=0;s>n;n++)if(t=this.items.eq(n),i=t.data("matrix-column-width"),e=Math.max(Math.round(i/this.colWidth),1),e>this.colCount&&(e=this.colCount),this.matrix.push({item:t,span:e}),e>1)for(var o=1;e>o;o++)this.matrix&&this.matrix.push({item:t,span:!1})},_positionItems:function(){var t=this.options.gutter,e=this.matrix,i,s,n=this.options.rtl?"right":"left",o=[],a=0,r=0,h,l,d,c,u={margin:0,position:"absolute"};for(h=0;h<this.colCount;h++)o.push(0);for(h=0,l=e.length;l>h;h++){for(i=e[h],s=i.span,r=-1,d=0;d<this.colCount;d++)(-1===r||o[d]<r)&&(r=o[d],a=d);if((a>=this.colCount||s+a>this.colCount)&&(a=0),s){for(c=0,d=0;s>d;d++)o[a+d]>c&&(c=o[a+d]);for(u.top=c,u[n]=(this.colWidth+t)*a,u.width=(this.colWidth+t)*s-t,i.item.css(u).reveal(),d=0;s>d;d++)o[a+d]=i.item.outerHeight()+t+c}this.colHeights[a]=o[a],a++}this.element.css("height",Math.max.apply(Math,o))},onResize:function(){this.refresh()}},{width:200,gutter:20,rtl:h.isRTL,defer:!0});h.createPlugin("matrix",function(t){return new O(this,t)});var z=h.Modal=f.extend({name:"Modal",version:"2.1.0",blackout:null,constructor:function(t,e){this.nodes=$(t),e=this.setOptions(e),this.element=this.createElement().attr("role","dialog").aria("labelledby",this.id("title")).aria("describedby",this.id("content")),e.fullScreen&&this.element.addClass("is-fullscreen"),e.blackout&&(this.blackout=v.instance()),this.addEvents([["keydown","window","onKeydown"],["click","document","onShow","{selector}"],["click","element","hide",this.ns("close")],["click","element","onSubmit",this.ns("submit")]]),e.clickout&&this.addEvent("click","element","onHide"),this.initialize()},hide:function(){this.fireEvent("hiding"),this.element.conceal(),this.blackout&&this.blackout.hide(),this.options.stopScroll&&$("body").removeClass("no-scroll"),this.fireEvent("hidden")},position:function(e){if(e!==!0){this.blackout&&this.blackout.hideLoader(),this.fireEvent("showing");var i=this.element.find(this.ns("content"));i.html(e),this.fireEvent("load",[e]),this.element.reveal(),this.options.fullScreen&&i.css("min-height",$(t).height()),this.fireEvent("shown")}},show:function(t,e){t&&(this.node=t=$(t),e||(e=this.readValue(t,this.readOption(t,"getContent"))||t.attr("href"))),this.blackout&&!this.element.is(":shown")&&this.blackout.show(),this.options.stopScroll&&$("body").addClass("no-scroll"),this.loadContent(e)},submit:function(){var e=this.element.find("form:first");if(e){this.fireEvent("submit",[e]);var i={url:e.attr("action"),type:(e.attr("method")||"post").toUpperCase()};t.FormData?(i.processData=!1,i.contentType=!1,i.data=new FormData(e[0])):i.data=e.serialize(),this.requestData(i)}},onHide:function(t){var e=this.element;("click"!==t.type||$(t.target).is(e))&&(t.preventDefault(),e.is(":shown")&&!e.hasClass("is-loading")&&this.hide())},onKeydown:function(t){27===t.keyCode&&this.element.is(":shown")&&this.hide()},onSubmit:function(t){t.preventDefault(),this.submit()}},{animation:"fade",blackout:!0,fullScreen:!1,stopScroll:!0,clickout:!0,getContent:"data-modal",template:function(t){return'<div class="'+t("modal")+'"><div class="'+t("modal","outer")+'"><div class="'+t("modal","inner")+'" data-modal-content></div><button class="'+t("modal","close")+'" data-modal-close><span class="x"></span></button></div></div>'}});h.createPlugin("modal",function(t){return new z(this,t)},!0);var S=h.OffCanvas=u.extend({name:"OffCanvas",version:"2.0.0",container:null,primary:null,secondary:null,side:"left",opposite:"right",_loaded:!1,constructor:function(t,e){t=this.setElement(t).attr("role","complementary").conceal(),e=this.setOptions(e,t);var i=e.animation;h.isTouch&&"squish"===i&&(e.animation=i="push"),"on-top"!==i&&"squish"!==i&&(e.hideOthers=!0),this.container=t.parent().addClass(i),this.primary=t.siblings("[data-offcanvas-content]").attr("role","main"),this.secondary=t.siblings("[data-offcanvas-sidebar]"),this.side=t.data("offcanvas-sidebar")||"left",this.opposite="left"===this.side?"right":"left",this.addEvents([["ready","document","onReady"],["resize","window","onResize"]]),e.swipe&&("left"===this.side?this.addEvents([["swipeleft","element","hide"],["swiperight","container","onSwipe"]]):this.addEvents([["swipeleft","container","onSwipe"],["swiperight","element","hide"]])),e.selector&&this.addEvent("click","document","toggle",e.selector),this.initialize()},destructor:function(){this.hide()},hide:function(){this.fireEvent("hiding"),this.container.removeClass("move-"+this.opposite),this.element.conceal().removeClass("is-expanded").aria("expanded",!1),this.options.stopScroll&&$("body").removeClass("no-scroll"),this.fireEvent("hidden")},show:function(){var t=this.options;t.hideOthers&&this.secondary.each(function(){var t=$(this);t.hasClass("is-expanded")&&t.toolkit("offCanvas","hide")}),this.fireEvent("showing"),this.container.addClass("move-"+this.opposite),this.element.reveal().addClass("is-expanded").aria("expanded",!0),t.stopScroll&&$("body").addClass("no-scroll"),this.fireEvent("shown")},toggle:function(){this.element.hasClass("is-expanded")?this.hide():this.show()},onReady:function(){if(this.options.openOnLoad&&!this._loaded){var t=this.element,e=this.primary,i="no-transition";t.addClass(i),e.addClass(i),this.show(),setTimeout(function(){t.removeClass(i),e.removeClass(i)},15),this._loaded=!0}},onResize:function(){this.fireEvent("resize")},onSwipe:function(t){t.preventDefault();var e=$(t.target),i="[data-offcanvas-sidebar]";e.is(i)||e.parents(i).length||this.show()}},{selector:"",animation:"push",openOnLoad:!1,hideOthers:!0,stopScroll:!0,swipe:h.isTouch});h.createPlugin("offCanvas",function(t){return new S(this,t)});var A=h.Pin=u.extend({name:"Pin",version:"2.1.6",active:!0,elementHeight:null,elementTop:0,parentHeight:null,parentTop:null,pinned:!1,initialTop:0,viewport:{},constructor:function(t,e){t=this.setElement(t),e=this.setOptions(e,t),t.attr("role","complementary").addClass(e.animation);var i=t.css("top");this.initialTop="auto"===i?0:parseInt(i,10),this.elementTop=t.offset().top;var s=e.throttle;this.addEvents([["scroll","window",$.throttle(this.onScroll.bind(this),s)],["resize","window",$.throttle(this.onResize.bind(this),s)],["ready","document","onResize"]]),this.initialize()},destructor:function(){this.active=!1,setTimeout(this.unpin.bind(this),15)},calculate:function(){var e=$(t),i=this.options,s=this.element,n=i.context?s.parents(i.context):s.parent();this.viewport={width:e.width(),height:e.height()},this.elementHeight=s.outerHeight(!0),this.parentHeight=n.height(),this.parentTop=n.offset().top,i.lock&&this.elementHeight>=this.viewport.height?this.active=!1:this.active=s.is(":visible")&&this.parentHeight>this.elementHeight},pin:function(){var e=this.options;if(e.calculate&&this.calculate(),this.active){var i=this.elementHeight,s=this.elementTop,n=this.parentHeight,o=this.parentTop,a=this.initialTop,r=$(t).scrollTop(),h={},l=e.xOffset,d=0;if(o>r||0===r)return void(this.pinned&&this.unpin());var c=r+i,u=n+o;e.fixed?c>=u?(d="auto",h.position="absolute",h.bottom=0):r>=s&&(d=e.yOffset,h.position="fixed",h.bottom="auto"):(h.position="absolute",d+=c>=u?n-i:r-o+e.yOffset,a&&a>d&&(d=a)),h[e.location]=l,h.top=d,this.element.css(h).addClass("is-pinned"),this.pinned=!0,this.fireEvent("pinned")}},unpin:function(){this.element.removeAttr("style").removeClass("is-pinned"),this.pinned=!1,this.fireEvent("unpinned")},onResize:function(){this.calculate(),this.pin(),this.fireEvent("resize")},onScroll:function(){this.pin(),this.fireEvent("scroll")}},{location:"right",xOffset:0,yOffset:0,throttle:50,fixed:!1,calculate:!1,lock:!0});h.createPlugin("pin",function(t){return new A(this,t)}),$.fn.positionTo=function(e,i,s,n){if(!e)return this;var o=s||{left:0,top:0},a,r=0,h=0,l=this.outerHeight(!0),d=this.outerWidth(!0),c=$(t),u=c.width(),p=c.height(),f=c.scrollTop();i.preventDefault?a={left:i.pageX,top:i.pageY}:(a=i.offset(),r=i.outerHeight(),h=i.outerWidth()),o.left+=a.left,o.top+=a.top;var m=o.top,v=o.left,g=e.split("-"),w={y:g[0],x:g[1]};return"top"===w.y?m-=l:"bottom"===w.y?m+=r:"center"===w.y&&(m-=Math.round(l/2-r/2)),"left"===w.x?v-=d:"right"===w.x?v+=h:"center"===w.x&&(v-=Math.round(d/2-h/2)),0>v?v=0:v+d>u&&(v=u-d),0>m?m=0:m+l>p+f&&(m=a.top-l),n&&("center"===w.y&&("left"===w.x?v-=15:"right"===w.x&&(v+=15)),"center"===w.x&&("top"===w.y?m-=10:"bottom"===w.y&&(m+=10))),this.css({left:v,top:m})};var L=h.Tooltip=w.extend({name:"Tooltip",version:"2.1.3",constructor:function(t,e){this.nodes=$(t),e=this.setOptions(e),this.createWrapper(),"title"===e.getTitle&&(e.getTitle="data-"+this.keyName+"-title",this.nodes.each(function(t,i){$(i).attr(e.getTitle,$(i).attr("title")).removeAttr("title")})),this.addEvents([["{mode}","document","onShowToggle","{selector}"],["resize","window",$.debounce(this.onHide.bind(this))]]),"click"===e.mode?this.addEvent("clickout","document","hide"):this.addEvent("mouseleave","document","hide","{selector}"),this.initialize()},hide:function(){this.fireEvent("hiding"),this.hideElements(),this.node&&this.node.removeAttr("aria-describedby").removeClass("is-active"),this.fireEvent("hidden")},position:function(t,e){if(t!==!0){this.fireEvent("showing");var i=this.node.aria("describedby",this.id()),s=this.inheritOptions(this.options,i),n=this.loadElement(i);if(e=e||this.readValue(i,s.getTitle),n.find(this.ns("header")).html(e).toggle(Boolean(e)&&s.showTitle).end().find(this.ns("content")).html(t),this.fireEvent("load",[t,e]),s.follow){var o=this.onFollow.bind(this);i.off("mousemove",o).on("mousemove",o)}else n.reveal().positionTo(s.position,i,{left:s.xOffset,top:s.yOffset});this.fireEvent("shown")}},show:function(t,e){this.node=t=$(t).addClass("is-active"),this.loadElement(t,function(e){e.addClass(this.readOption(t,"position")).attr("role","tooltip")}),this.loadContent(e||this.readValue(t,this.readOption(t,"getContent")))},onFollow:function(t){t.preventDefault();var e=this.options;this.element.reveal().positionTo(e.position,t,{left:e.xOffset,top:e.yOffset},!0)},onHide:function(){if(this.node){var t=this.loadElement(this.node);t.is(":shown")&&this.hide()}},onRequestBefore:function(t){w.prototype.onRequestBefore.call(this,t),this.options.showLoading&&this.position(h.messages.loading)}},{mode:"hover",animation:"fade",follow:!1,position:"top-center",showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-tooltip",mouseThrottle:50,xOffset:0,yOffset:0,wrapperClass:function(t){return t("tooltips")},template:function(t){return'<div class="'+t("tooltip")+'"><div class="'+t("tooltip","inner")+'"><div class="'+t("tooltip","head")+'" data-tooltip-header></div><div class="'+t("tooltip","body")+'" data-tooltip-content></div></div><div class="'+t("tooltip","arrow")+'"></div></div>'}});h.createPlugin("tooltip",function(t){return new L(this,t)},!0);var D=h.Popover=L.extend({name:"Popover",version:"2.1.3",constructor:function(t,e){e=e||{},e.mode="click",e.follow=!1,L.prototype.constructor.call(this,t,e)}},{getContent:"data-popover",wrapperClass:function(t){return t("popovers")},template:function(t){return'<div class="'+t("popover")+'"><div class="'+t("popover","inner")+'"><div class="'+t("popover","head")+'" data-popover-header></div><div class="'+t("popover","body")+'" data-popover-content></div></div><div class="'+t("popover","arrow")+'"></div></div>'}});h.createPlugin("popover",function(t){return new D(this,t)},!0);var I=h.Showcase=f.extend({name:"Showcase",version:"2.1.0",animating:!1,blackout:null,caption:null,data:[],index:-1,items:[],tabs:[],constructor:function(t,e){var i;e=this.setOptions(e),this.element=i=this.createElement(),this.nodes=$(t),this.items=i.find(this.ns("items")),this.tabs=i.find(this.ns("tabs")),this.caption=i.find(this.ns("caption")),e.blackout&&(this.blackout=v.instance()),this.addEvents([["keydown","window","onKeydown"],["click","document","onShow","{selector}"],["click","element","hide",this.ns("close")],["click","element","next",this.ns("next")],["click","element","prev",this.ns("prev")],["click","element","onJump",this.ns("tabs")+" a"]]),e.clickout&&this.addEvents([["clickout","document","onHide","{selector}"],["clickout","element","onHide"]]),e.swipe&&this.addEvents([["swipeleft","element","next"],["swiperight","element","prev"]]),this.addEvent(h.transitionEnd,"element",function(t){t.stopPropagation()},this.ns("items")),this.initialize()},hide:function(){this.fireEvent("hiding"),this.blackout&&this.blackout.hide(),this.options.stopScroll&&$("body").removeClass("no-scroll"),this.element.conceal().removeClass("is-single"),this.items.removeAttr("style").children("li").conceal(!0),this.fireEvent("hidden")},jump:function(t){if(!this.animating&&(t=$.bound(t,this.data.length),t!==this.index)){var e=this,i=this.element,s=this.caption,n=this.items,o=n.children("li"),a=o.eq(t),r=this.data,l=r[t],d=$.Deferred();if(this.fireEvent("jumping",[this.index]),this.tabs.find("a").removeClass("is-active").eq(t).addClass("is-active"),o.conceal(!0),s.conceal(!0),i.addClass("is-loading").aria("busy",!0).reveal(),this.animating=!0,d.always(function(t,o){n.transitionend(function(){s.html(l.title).reveal(!0),a.reveal(!0),e.position(),e.animating=!1}),e._resize(t,o),i.removeClass("is-loading").aria("busy",!1),a.data("width",t).data("height",o)}),d.fail(function(){i.addClass("has-failed"),a.html(h.messages.error)}),a.data("width"))d.resolve(a.data("width"),a.data("height"));else{var c=new Image;c.src=l.image,c.onerror=function(){d.reject(150,150)},c.onload=function(){d.resolve(this.width,this.height),a.append(c)}}this.blackout&&this.blackout.hideLoader(),this.index=t,this.fireEvent("jumped",[t])}},next:function(){this.jump(this.index+1)},position:function(){this.fireEvent("showing"),this.blackout&&this.blackout.hideLoader(),this.element.reveal(),this.fireEvent("shown")},prev:function(){this.jump(this.index-1)},show:function(t){this.node=t=$(t),this.index=-1;var e=this.inheritOptions(this.options,t),i=this.readValue,s=i(t,e.getCategory),n=[],o=0;if(s)for(var a=0,r=0,h;h=this.nodes[a];a++)i(h,e.getCategory)===s&&(t.is(h)&&(o=r),n.push({title:i(h,e.getTitle),category:s,image:i(h,e.getImage)}),r++);else n.push({title:i(t,e.getTitle),category:s,image:i(t,e.getImage)});this.blackout&&this.blackout.show(),e.stopScroll&&$("body").addClass("no-scroll"),this._buildItems(n),this.jump(o)},_buildItems:function(t){this.data=t,this.items.empty(),this.tabs.empty();for(var e,i,s,n=0;s=t[n];n++)e=$("<li/>"),e.appendTo(this.items),i=$("<a/>").attr("href","javascript:;").data("showcase-index",n),e=$("<li/>"),e.appendTo(this.tabs).append(i);t.length<=1&&this.element.addClass("is-single"),this.fireEvent("load",[t])},_resize:function(e,i){var s=2*this.options.gutter,n=$(t).width()-s,o=$(t).height()-s,a,r;e>n&&(a=e/i,r=e-n,e=n,i-=Math.round(r/a)),i>o&&(a=i/e,r=i-o,e-=Math.round(r/a),i=o),this.items.css({width:e,height:i})},onHide:function(t){t.preventDefault();var e=this.element;e.is(":shown")&&!e.hasClass("is-loading")&&this.hide()},onJump:function(t){t.preventDefault(),this.jump($(t.target).data("showcase-index")||0)},onKeydown:function(t){if(this.element.is(":shown"))switch($.inArray(t.keyCode,[37,38,39,40])>=0&&t.preventDefault(),t.keyCode){case 27:this.hide();break;case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1)}}},{blackout:!0,stopScroll:!0,clickout:!0,swipe:h.isTouch,gutter:50,getCategory:"data-showcase",getImage:"href",getTitle:"title",template:function(t){return'<div class="'+t("showcase")+'"><div class="'+t("showcase","inner")+'"><ul class="'+t("showcase","items")+'" data-showcase-items></ul><ol class="'+t("showcase","tabs")+' bullets" data-showcase-tabs></ol><button class="'+t("showcase","prev")+'" data-showcase-prev></button><button class="'+t("showcase","next")+'" data-showcase-next></button></div><button class="'+t("showcase","close")+'" data-showcase-close><span class="x"></span></button><div class="'+t("showcase","caption")+'" data-showcase-caption></div></div>'}});h.createPlugin("showcase",function(t){return new I(this,t)},!0);var H=h.Stalker=u.extend({name:"Stalker",version:"2.0.0",container:$(t),targets:[],markers:[],offsets:[],constructor:function(t,e){if(t=this.setElement(t),e=this.setOptions(e),!e.target||!e.marker)throw new Error("A marker and target is required");"auto"===t.css("overflow")&&(this.container=t),this.addEvents([["scroll","container",$.throttle(this.onScroll.bind(this),e.throttle)],["ready","document","onScroll"]]),this.initialize(),this.refresh()},destructor:function(){this.targets.removeClass("is-active"),this.markers.removeClass("is-marked")},activate:function(t){this.stalk(t,"activate")},deactivate:function(t){this.stalk(t,"deactivate")},stalk:function(t,e){if(t=$(t),("activate"!==e||!t.hasClass("is-stalked"))&&("deactivate"!==e||t.hasClass("is-stalked"))){var i=this.options,s=i.targetBy,n=i.markBy,o=this.targets.filter(function(){return $(this).attr(s).replace("#","")===t.attr(n)}),a,r,h;"activate"===e?(a="activating",r="activated",h="addClass"):(a="deactivating",r="deactivated",h="removeClass"),this.fireEvent(a,[t,o]),t[h]("is-stalked"),o[h]("is-active"),this.fireEvent(r,[t,o])}},refresh:function(){var e=this.container.is(t),i=this.element.offset().top,s,n=[];"auto"!==this.element.css("overflow")||this.element.is("body")||(this.element[0].scrollTop=0),this.targets=$(this.options.target),this.markers=$(this.options.marker).each(function(t,o){s=$(o).offset(),e||(s.top-=i),n.push(s)}),this.offsets=n},onScroll:function(){var t=this.container.scrollTop(),e=this.offsets,i=this.options.onlyWithin,s=this.options.threshold;this.markers.each(function(n,o){o=$(o);var a=e[n],r=a.top-s,h=a.top+o.height()+s;i&&t>=r&&h>=t||!i&&t>=r?this.activate(o):this.deactivate(o)}.bind(this)),this.fireEvent("scroll")}},{target:"",targetBy:"href",marker:"",markBy:"id",threshold:50,throttle:50,onlyWithin:!0,applyToParent:!0});h.createPlugin("stalker",function(t){return new H(this,t)});var R=h.Tab=u.extend({name:"Tab",version:"2.0.0",index:0,nav:null,sections:[],tabs:[],constructor:function(t,e){var i,s,n=this;t=this.setElement(t),e=this.setOptions(e,t),e.cookie||(e.cookie=t.attr("id")),this.sections=i=t.find(this.ns("section")).each(function(t,e){e=$(e),e.attr("role","tabpanel").attr("id",e.attr("id")||n.id("section",t)).aria("labelledby",n.id("tab",t)).conceal()}),this.nav=t.find(this.ns("nav")).attr("role","tablist"),this.tabs=s=this.nav.find("a").each(function(t){$(this).data("tab-index",t).attr({role:"tab",id:n.id("tab",t)}).aria({controls:i.eq(t).attr("id"),selected:!1,expanded:!1}).removeClass("is-active")}),this.addEvent("{mode}","element","onShow",this.ns("nav")+" a"),"click"!==e.mode&&e.preventDefault&&this.addEvent("click","element",function(t){t.preventDefault()},this.ns("nav")+" a"),this.initialize();var o=null;e.persistState&&(e.cookie&&$.cookie&&(o=$.cookie("toolkit.tab."+e.cookie)),null===o&&e.loadFragment&&location.hash&&(o=s.filter(function(){return $(this).attr("href")===location.hash}).eq(0).data("tab-index"))),s[o]||(o=e.defaultIndex),this.jump(o)},destructor:function(){this.jump(0)},hide:function(){this.fireEvent("hiding"),this.sections.conceal(),this.fireEvent("hidden")},jump:function(t){this.show(this.tabs[$.bound(t,this.tabs.length)])},show:function(t){t=$(t);var e=t.data("tab-index"),i=this.sections.eq(e),s=this.options,n=this.readValue(t,this.readOption(t,"getUrl"));this.fireEvent("showing",[this.index]),"javascript"!==n.substr(0,10)&&"#"!==n.substr(0,1)&&this.loadContent(n,{section:i}),this.tabs.aria("toggled",!1).removeClass("is-active"),e===this.index&&s.collapsible?i.is(":shown")?i.conceal():(t.aria("toggled",!0).addClass("is-active"),i.reveal()):(this.hide(),t.aria("toggled",!0).addClass("is-active"),i.reveal()),s.persistState&&$.cookie&&$.cookie("toolkit.tab."+s.cookie,e,{expires:s.cookieDuration}),this.index=e,this.node=t,this.fireEvent("shown",[e])},onRequestBefore:function(t){t.params.section.html(h.messages.loading).addClass("is-loading").aria("busy",!0)},onRequestDone:function(t,e,i){i.cache&&(this.cache[i.url]=t),this.fireEvent("load",[t]),i.params.section.html(t).removeClass("is-loading").aria("busy",!1)},onRequestFail:function(t){t.params.section.html(h.messages.error).removeClass("is-loading").addClass("has-failed").aria("busy",!1)},onShow:function(t){(this.options.preventDefault||"#"!==t.currentTarget.getAttribute("href").substr(0,1))&&t.preventDefault(),this.show(t.currentTarget)}},{mode:"click",collapsible:!1,defaultIndex:0,persistState:!1,preventDefault:!0,loadFragment:!0,cookie:null,cookieDuration:30,getUrl:"href"});h.createPlugin("tab",function(t){return new R(this,t)});var j=h.Toast=w.extend({name:"Toast",version:"2.1.0",constructor:function(t,e){this.nodes=t=$(t),e=this.setOptions(e,t),this.createWrapper().addClass(e.position).attr("role","log").aria({relevant:"additions",hidden:"false"}),this.initialize()},create:function(t,e){e=$.extend({},this.options,e||{});var i=this,s=this.render(e.template).addClass(e.animation).attr("role","note").html(t).conceal().prependTo(this.wrapper);this.fireEvent("create",[s]),setTimeout(function(){i.show(s)},15),e.duration&&setTimeout(function(){i.hide(s)},e.duration+15)},hide:function(t){t=$(t),this.fireEvent("hiding",[t]),t.transitionend(function(){t.remove(),this.fireEvent("hidden")}.bind(this)).conceal()},show:function(t){t=$(t),this.fireEvent("showing",[t]),t.reveal(),this.fireEvent("shown",[t])}},{position:"bottom-left",animation:"slide-up",duration:5e3,wrapperClass:function(t){return t("toasts")},template:function(t){return'<div class="'+t("toast")+'"></div>'}});h.createPlugin("toast",function(t){return new j(this,t)});var N=h.TypeAhead=f.extend({name:"TypeAhead",version:"2.1.3",index:-1,input:null,items:[],shadow:null,term:"",timer:null,wrapper:null,constructor:function(t,e){if(t=$(t),"input"!==t.prop("tagName").toLowerCase())throw new Error("TypeAhead must be initialized on an input field");var i=this;if(e=this.setOptions(e,t),this.element=this.createElement().attr("role","listbox").aria("multiselectable",!1),this.input=t,$.each({sorter:"sort",matcher:"match",builder:"build"},function(t,s){if(e[t]!==!1){var n;n=null===e[t]||"function"!==$.type(e[t])?i[s]:e[t],e[t]=n.bind(i)}}),e.prefetch&&"string"===$.type(e.source)){var s=e.source;$.getJSON(s,e.query,function(t){i.cache[s]=t})}e.shadow&&(this.wrapper=this.render(this.options.shadowTemplate),this.shadow=this.input.clone().addClass("is-shadow").removeAttr("id").prop("readonly",!0).aria("readonly",!0),this.input.addClass("not-shadow").replaceWith(this.wrapper),this.wrapper.append(this.shadow).append(this.input)),t.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false",role:"combobox"}).aria({autocomplete:"list",owns:this.element.attr("id"),expanded:!1}),this.addEvents([["keyup","input","onLookup"],["keydown","input","onCycle"],["clickout","element","hide"],["resize","window",$.debounce(this.onHide.bind(this))]]),this.initialize()},destructor:function(){this.shadow&&(this.shadow.parent().replaceWith(this.input),this.input.removeClass("not-shadow"))},build:function(t){var e=$("<a/>",{href:"javascript:;",role:"option","aria-selected":"false"});return e.append(this.render(this.options.titleTemplate).html(this.highlight(t.title))),t.description&&e.append(this.render(this.options.descTemplate).html(t.description)),
e},hide:function(){this.fireEvent("hiding"),this.shadow&&this.shadow.val(""),this.input.aria("expanded",!1),this.element.conceal(),this.fireEvent("hidden")},highlight:function(t){for(var e=this.term.replace(/[\-\[\]\{\}()*+?.,\\^$|#]/g,"\\$&").split(" "),i=this.options,s=function(t){return this.render(i.highlightTemplate).html(t).toString()}.bind(this),n=0,o;o=e[n];n++)t=t.replace(new RegExp(o,"ig"),s);return t},lookup:function(t){this.term=t,this.timer=setTimeout(this.onFind.bind(this),this.options.throttle)},match:function(t,e){return t.title.toLowerCase().indexOf(e.toLowerCase())>=0},position:function(){if(!this.items.length)return void this.hide();this.fireEvent("showing");var t=this.input.offset();this.element.css("top",t.top+this.input.outerHeight()).css(h.isRTL?"right":"left",t.left).reveal(),this.input.aria("expanded",!0),this.fireEvent("shown")},rewind:function(){this.index=-1,this.element.find("li").removeClass("is-active")},select:function(t,e){this.index=t;var i=this.element.find("li");if(i.removeClass("is-active").find("a").aria("selected",!1),t>=0){if(this.items[t]){var s=this.items[t];i.eq(t).addClass("is-active").find("a").aria("selected",!0),this.input.val(s.title),this.fireEvent(e||"select",[s,t])}}else this.input.val(this.term),this.fireEvent("reset")},sort:function(t){return t.sort(function(t,e){return t.title.localeCompare(e.title)})},source:function(t){if(!this.term.length||!t.length)return void this.hide();var e=this.options,i=this.term,s={_empty_:[]},n,o=$("<ul/>");this.items=[],this.index=-1,"function"===$.type(e.sorter)&&(t=e.sorter(t)),"function"===$.type(e.matcher)&&(t=t.filter(function(t){return e.matcher(t,i)}));for(var a=0;n=t[a];a++)n.category?(s[n.category]||(s[n.category]=[]),s[n.category].push(n)):s._empty_.push(n);var r=[],h=0;$.each(s,function(t,i){var s=[];"_empty_"!==t&&(r.push(null),s.push(this.render(e.headingTemplate).append($("<span/>",{text:t}))));for(var a=0,l;(n=i[a])&&!(h>=e.itemLimit);a++)l=e.builder(n),l.on({mouseover:this.rewind.bind(this),click:$.proxy(this.onSelect,this,r.length)}),s.push($("<li/>").append(l)),r.push(n),h++;o.append(s)}.bind(this)),this.element.empty().append(o),this.items=r,this.cache[i.toLowerCase()]=r.filter(function(t){return null!==t}),this.fireEvent("load"),this._shadow(),this.position()},_shadow:function(){if(this.shadow){var t=this.input.val(),e=t.toLowerCase(),i="";if(this.cache[e]&&this.cache[e][0]){var s=this.cache[e][0].title;0===s.toLowerCase().indexOf(e)&&(i=t+s.substr(t.length,s.length-t.length))}this.shadow.val(i)}},onCycle:function(t){var e=this.items,i=Math.min(this.options.itemLimit,Math.max(0,e.length)),s="cycle";if(i&&this.element.is(":shown")){switch(t.keyCode){case 38:this.index-=e[this.index-1]?1:2,this.index<0&&(this.index=i);break;case 40:this.index+=e[this.index+1]?1:2,this.index>=i&&(this.index=-1);break;case 9:t.preventDefault();for(var n=0;!this.items[n];)n++;s="select",this.index=n,this.hide();break;case 13:t.preventDefault(),s="select",this.hide();break;case 27:this.index=-1,this.hide();break;default:return}this.shadow&&this.shadow.val(""),this.select(this.index,s)}},onFind:function(){var t=this.term,e=this.options,i=$.type(e.source);if(this.cache[t.toLowerCase()])this.source(this.cache[t.toLowerCase()]);else if("string"===i){var s=e.source,n=this.cache[s];if(n)this.source(n);else{var o=e.query;o.term=t,$.getJSON(s,o,this.source.bind(this))}}else if("array"===i)this.source(e.source);else{if("function"!==i)throw new Error("Invalid TypeAhead source type");var a=e.source.call(this);a&&this.source(a)}},onLookup:function(t){if(!($.inArray(t.keyCode,[38,40,27,9,13])>=0)){clearTimeout(this.timer);var e=this.input.val().trim();e.length<this.options.minLength?(this.fireEvent("reset"),this.hide()):(this._shadow(),this.lookup(e))}},onSelect:function(t){this.select(t),this.hide()}},{source:[],minLength:1,itemLimit:15,throttle:250,prefetch:!1,shadow:!1,query:{},template:function(t){return'<div class="'+t("type-ahead")+'"></div>'},shadowTemplate:function(t){return'<div class="'+t("type-ahead","shadow")+'"></div>'},titleTemplate:function(t){return'<span class="'+t("type-ahead","title")+'"></span>'},descTemplate:function(t){return'<span class="'+t("type-ahead","desc")+'"></span>'},highlightTemplate:function(t){return'<mark class="'+t("type-ahead","highlight")+'"></mark>'},headingTemplate:function(t){return'<li class="'+t("type-ahead","heading")+'"></li>'},sorter:null,matcher:null,builder:null});h.createPlugin("typeAhead",function(t){return new N(this,t)}),$.event.special.verticalresize=function(){function e(t){var e=i.height();e!==s&&(s=e,$(t.target).trigger("verticalresize"))}var i=$(t),s=i.height();return{setup:function(){i.on("resize",e)},teardown:function(){i.off("resize",e)}}}()}(jQuery,window,document),$(".js-drop").drop();